#! /usr/bin/env node
/**
 * @file        remote-sched.simple
 *              Test that shows that we can load a config from a scheduler. Defaults to production
 *              scheduler, CI should override this via env.
 *
 * @author      Wes Garland, wes@kingsds.network
 * @date        Aug 2020
 */
'use strict';

var bootstrapBankHref;

function main()
{
  const { assert } = require('dcp/dcp-assert').always;
  
  assert(dcpConfig.scheduler.services);
  assert(Object.keys(dcpConfig.scheduler.services).length > 5);
  assert(bootstrapBankHref && dcpConfig.bank.location.href !== bootstrapBankHref); /* ensure remote mutates running config */
}

require('..');
bootstrapBankHref = require('dcp/dcp-config').bank.location.href;
require('..').init().then(main);
